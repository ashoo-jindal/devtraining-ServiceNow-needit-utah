<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {  /* widget controller */  var c = this;};]]></client_script>
        <controller_as>c</controller_as>
        <css>#myreq {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#myreq td, #customers th {
  border: 1px solid #ddd;
  padding: 8px;
}

#myreq tr:nth-child(odd){background-color: #f2f2f2;}

#myreq tr:hover {background-color: #ddd;}

#myreq th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #609CFC;
  color: white;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>my_requests_isr_aj</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>My Requests ISR AJ</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
	
	
	var userObject = gs.getUser(); 
	var firstName = userObject.getFirstName();
	data.userName = userObject.getName();
	data.userID = userObject.getID();
	
	data.myTable = 'x_58872_needit_isr';
	data.myFilter = 'requested_for='+data.userID;
	

	var gr = new GlideRecord(data.myTable);
  gr.addEncodedQuery(data.myFilter);
	gr.orderBy('number');
	gr.query();
	
	data.out = [];
	
	while(gr.next()){
		var json = {};
		json.number = gr.getDisplayValue('number');
		json.reqType = gr.getDisplayValue('request_type');
		json.shortDesc = gr.getValue('short_desc');		
		json.priority = gr.getDisplayValue('priority');		
		json.status = gr.getDisplayValue('status');				
		json.sys_id = gr.getValue('sys_id');				
		data.out.push(json);
	}

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-10-10 04:47:13</sys_created_on>
        <sys_id>07528965473131100230afb8036d435b</sys_id>
        <sys_mod_count>13</sys_mod_count>
        <sys_name>My Requests ISR AJ</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sp_widget_07528965473131100230afb8036d435b</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-10-13 07:50:33</sys_updated_on>
        <template><![CDATA[<div>
<!-- your widget template -->
  
  
<h3>My Requests</h3>

<table id="myreq">
  <tr>
    <th>Number</th>
    <th>Request Type</th>
    <th>Short Desc</th>
    <th>Priority</th>    
    <th>Status</th>        
  </tr>
  <tr ng-repeat="x in data.out">
    <td><a href="?id=form&table={{data.myTable}}&sys_id={{x.sys_id}}" target="_blank">{{x.number}}</a></td>
    <td>{{x.reqType}}</td>
    <td>{{x.shortDesc}}</td>
    <td>{{x.priority}}</td>
    <td>{{x.status}}</td>
  </tr>
</table>
  
  
  
</div>]]></template>
    </sp_widget>
</record_update>
